{% load static %}
<div class="flex w-full p-2 bg-white my-1 rounded-lg">
    <div class="flex flex-col lg:flex-row w-full justify-between items-center">

        <!-- Icono usuario -->
        <div class="flex w-full lg:w-auto justify-start p-3">
            <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" class="text-gray-700" viewBox="0 0 24 24">
                <path fill="currentColor"
                    d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
            </svg>
        </div>

        <!-- InformaciÃ³n principal -->
        <div class="flex flex-col w-full justify-start items-start px-3">
            <p class="text-sm font-bold text-gray-700 truncate dark:text-white uppercase">
                {{ venta.usuario.username }} - {{ venta.lote.nombre|default:venta.vivienda.nombre|default:"Sin bien" }}
            </p>
            <div class="flex flex-col gap-1 text-xs text-gray-500 truncate dark:text-gray-400">
                <div class="flex gap-2 text-xs uppercase text-gray-500">
                    <strong>Tipo de venta:</strong> {{ venta.get_tipo_venta_display }}
                </div>
                <div class="flex gap-2 text-xs text-gray-500">
                    <strong>Monto total:</strong> {{ venta.monto_total }}
                </div>
                <div class="flex gap-2 text-xs text-gray-500">
                    <strong>Saldo restante:</strong> {{ venta.saldo_restante }}
                </div>
            </div>
        </div>

        <!-- Estado y acciones -->
        <div class="flex gap-3 w-full justify-between items-center">
            <div class="flex flex-col lg:flex-row lg:gap-3 w-full justify-between items-start lg:items-center py-3">

                <!-- Estado -->
                <div class="flex w-full justify-center items-center py-2 px-3 text-xs font-bold">
                    {% if venta.estado == "PENDIENTE" %}
                        <div class="bg-yellow-600 rounded-full text-center text-white px-3 py-1 min-w-[130px]">Pendiente</div>
                    {% elif venta.estado == "CANCELADO" %}
                        <div class="bg-green-600 rounded-full text-center text-white px-3 py-1 min-w-[130px]">Cancelado</div>
                    {% elif venta.estado == "RETRASO" %}
                        <div class="bg-red-600 rounded-full text-center text-white px-3 py-1 min-w-[130px]">En retraso</div>
                    {% endif %}
                </div>

                <div class="flex flex-col gap-1 px-3 py-2 text-gray-500 w-full" style="font-size: 10px;">
                    <strong>Registrado:</strong>
                    {{ venta.fecha_venta|date:"d/m/Y H:i" }}
                </div>

                <div class="flex py-1 w-full gap-2 justify-end items-end text-base font-semibold text-gray-900 dark:text-white">
                    {% if user.rol == 'Administrador general' %}
                        {% include 'admin/ventas/btn_formulario_editar.html' with venta=venta %}
                        {% include 'admin/ventas/btn_eliminar_registro.html' with venta=venta %}
                    {% endif %}
                </div>

            </div>
        </div>
    </div>
</div>
